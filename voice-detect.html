<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Demo Voice Detect</title>
        <style>
            body > div {
                text-align: center;
            }
            .talk {
                padding: 10px 20px;
                cursor: pointer;
            }
        </style>
    </head>
    <body>
        <div>
            <button class="talk">Click to Talk</button>
        </div>
        
        <h3 style="color: #1596d3" class="content">
        </h3>



        <script>
            const btn = document.querySelector('.talk');
            const content = document.querySelector('.content');

            const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;

            const recognition = new SpeechRecognition();

            recognition.onstart = function() {
                console.log('Start using voice recoder!');
            };

            recognition.onresult = function(event) {
                const current = event.resultIndex;

                const transcript = event.results[current][0].transcript;
                
                const newLine = document.createElement("DIV");
                newLine.innerHTML = transcript;

                content.appendChild(newLine);

                speakOutLoud(transcript);
            };

            // add listener to the btn
            btn.addEventListener('click', () => {
                recognition.start();
            });

            function speakOutLoud(message) {
                const speech = new SpeechSynthesisUtterance();
                speech.text = message;
                //if (message)
                speech.volume = 1;
                speech.rate = 1;
                speech.pitch = 1;

                window.speechSynthesis.speak(speech);
            }
        </script>
    </body>
</html>
